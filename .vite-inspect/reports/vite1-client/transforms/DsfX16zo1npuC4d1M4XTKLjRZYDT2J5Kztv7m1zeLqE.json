{
  "resolvedId": "C:/Users/.Freelancer/baotangnghethuat/src/components/OptimizedImage/OptimizedImage.jsx",
  "transforms": [
    {
      "name": "vite:load-fallback",
      "result": "import React, { useEffect, useRef, useState } from \"react\";\r\n\r\nconst OptimizedImage = ({\r\n  src,\r\n  alt,\r\n  className = \"\",\r\n  width,\r\n  height,\r\n  priority = false,\r\n  sizes = \"100vw\",\r\n  loading = \"lazy\",\r\n  onLoad,\r\n  onError,\r\n  style = {},\r\n  ...props\r\n}) => {\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n  const [isError, setIsError] = useState(false);\r\n  const [isInView, setIsInView] = useState(priority);\r\n  const imgRef = useRef(null);\r\n  const placeholderRef = useRef(null);\r\n\r\n  // Intersection Observer for lazy loading\r\n  useEffect(() => {\r\n    if (priority || isInView) return;\r\n\r\n    const observer = new IntersectionObserver(\r\n      (entries) => {\r\n        const [entry] = entries;\r\n        if (entry.isIntersecting) {\r\n          setIsInView(true);\r\n          observer.disconnect();\r\n        }\r\n      },\r\n      {\r\n        threshold: 0.1,\r\n        rootMargin: \"50px 0px\",\r\n      }\r\n    );\r\n\r\n    if (placeholderRef.current) {\r\n      observer.observe(placeholderRef.current);\r\n    }\r\n\r\n    return () => observer.disconnect();\r\n  }, [priority, isInView]);\r\n\r\n  const handleLoad = () => {\r\n    setIsLoaded(true);\r\n    onLoad?.();\r\n  };\r\n\r\n  const handleError = () => {\r\n    setIsError(true);\r\n    onError?.();\r\n  };\r\n\r\n  return (\r\n    <div\r\n      ref={placeholderRef}\r\n      className={`optimized-image-container ${className}`}\r\n      style={{\r\n        position: \"relative\",\r\n        overflow: \"hidden\",\r\n        backgroundColor: \"#f0f0f0\",\r\n        ...style,\r\n        ...(width && height && { aspectRatio: `${width} / ${height}` }),\r\n      }}\r\n      {...props}\r\n    >\r\n      {/* Main image */}\r\n      {(priority || isInView) && (\r\n        <picture>\r\n          {/* WebP source */}\r\n          <source srcSet={src} sizes={sizes} type=\"image/webp\" />\r\n\r\n          {/* Fallback source */}\r\n          <source srcSet={src} sizes={sizes} type=\"image/jpeg\" />\r\n\r\n          <img\r\n            ref={imgRef}\r\n            src={src}\r\n            alt={alt}\r\n            width={width}\r\n            height={height}\r\n            loading={priority ? \"eager\" : loading}\r\n            decoding=\"async\"\r\n            onLoad={handleLoad}\r\n            onError={handleError}\r\n            style={{\r\n              position: \"absolute\",\r\n              top: 0,\r\n              left: 0,\r\n              width: \"100%\",\r\n              height: \"100%\",\r\n              objectFit: \"cover\",\r\n              transition: \"opacity 0.3s ease\",\r\n              opacity: isLoaded ? 1 : 0,\r\n              transform: \"translateZ(0)\", // Force hardware acceleration\r\n            }}\r\n          />\r\n        </picture>\r\n      )}\r\n\r\n      {/* Loading indicator */}\r\n      {!isLoaded && !isError && (priority || isInView) && (\r\n        <div\r\n          className=\"image-loading\"\r\n          style={{\r\n            position: \"absolute\",\r\n            top: \"50%\",\r\n            left: \"50%\",\r\n            transform: \"translate(-50%, -50%)\",\r\n            width: \"40px\",\r\n            height: \"40px\",\r\n            border: \"3px solid #f3f3f3\",\r\n            borderTop: \"3px solid #b38741\",\r\n            borderRadius: \"50%\",\r\n            animation: \"spin 1s linear infinite\",\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {/* Error state */}\r\n      {isError && (\r\n        <div\r\n          className=\"image-error\"\r\n          style={{\r\n            position: \"absolute\",\r\n            top: \"50%\",\r\n            left: \"50%\",\r\n            transform: \"translate(-50%, -50%)\",\r\n            textAlign: \"center\",\r\n            color: \"#666\",\r\n            fontSize: \"14px\",\r\n          }}\r\n        >\r\n          ⚠️ Failed to load image\r\n        </div>\r\n      )}\r\n\r\n      <style>{`\r\n        @keyframes spin {\r\n          0% {\r\n            transform: translate(-50%, -50%) rotate(0deg);\r\n          }\r\n          100% {\r\n            transform: translate(-50%, -50%) rotate(360deg);\r\n          }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OptimizedImage;\r\n",
      "start": 1749089004424,
      "end": 1749089004962,
      "sourcemaps": null
    },
    {
      "name": "vite:react-babel",
      "start": 1749089004962,
      "end": 1749089004962,
      "order": "pre"
    },
    {
      "name": "vite:esbuild",
      "result": "import { jsx, jsxs } from \"react/jsx-runtime\";\nimport React, { useEffect, useRef, useState } from \"react\";\nconst OptimizedImage = ({\n  src,\n  alt,\n  className = \"\",\n  width,\n  height,\n  priority = false,\n  sizes = \"100vw\",\n  loading = \"lazy\",\n  onLoad,\n  onError,\n  style = {},\n  ...props\n}) => {\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [isError, setIsError] = useState(false);\n  const [isInView, setIsInView] = useState(priority);\n  const imgRef = useRef(null);\n  const placeholderRef = useRef(null);\n  useEffect(() => {\n    if (priority || isInView) return;\n    const observer = new IntersectionObserver(\n      (entries) => {\n        const [entry] = entries;\n        if (entry.isIntersecting) {\n          setIsInView(true);\n          observer.disconnect();\n        }\n      },\n      {\n        threshold: 0.1,\n        rootMargin: \"50px 0px\"\n      }\n    );\n    if (placeholderRef.current) {\n      observer.observe(placeholderRef.current);\n    }\n    return () => observer.disconnect();\n  }, [priority, isInView]);\n  const handleLoad = () => {\n    setIsLoaded(true);\n    onLoad?.();\n  };\n  const handleError = () => {\n    setIsError(true);\n    onError?.();\n  };\n  return /* @__PURE__ */ jsxs(\n    \"div\",\n    {\n      ref: placeholderRef,\n      className: `optimized-image-container ${className}`,\n      style: {\n        position: \"relative\",\n        overflow: \"hidden\",\n        backgroundColor: \"#f0f0f0\",\n        ...style,\n        ...width && height && { aspectRatio: `${width} / ${height}` }\n      },\n      ...props,\n      children: [\n        (priority || isInView) && /* @__PURE__ */ jsxs(\"picture\", { children: [\n          /* @__PURE__ */ jsx(\"source\", { srcSet: src, sizes, type: \"image/webp\" }),\n          /* @__PURE__ */ jsx(\"source\", { srcSet: src, sizes, type: \"image/jpeg\" }),\n          /* @__PURE__ */ jsx(\n            \"img\",\n            {\n              ref: imgRef,\n              src,\n              alt,\n              width,\n              height,\n              loading: priority ? \"eager\" : loading,\n              decoding: \"async\",\n              onLoad: handleLoad,\n              onError: handleError,\n              style: {\n                position: \"absolute\",\n                top: 0,\n                left: 0,\n                width: \"100%\",\n                height: \"100%\",\n                objectFit: \"cover\",\n                transition: \"opacity 0.3s ease\",\n                opacity: isLoaded ? 1 : 0,\n                transform: \"translateZ(0)\"\n                // Force hardware acceleration\n              }\n            }\n          )\n        ] }),\n        !isLoaded && !isError && (priority || isInView) && /* @__PURE__ */ jsx(\n          \"div\",\n          {\n            className: \"image-loading\",\n            style: {\n              position: \"absolute\",\n              top: \"50%\",\n              left: \"50%\",\n              transform: \"translate(-50%, -50%)\",\n              width: \"40px\",\n              height: \"40px\",\n              border: \"3px solid #f3f3f3\",\n              borderTop: \"3px solid #b38741\",\n              borderRadius: \"50%\",\n              animation: \"spin 1s linear infinite\"\n            }\n          }\n        ),\n        isError && /* @__PURE__ */ jsx(\n          \"div\",\n          {\n            className: \"image-error\",\n            style: {\n              position: \"absolute\",\n              top: \"50%\",\n              left: \"50%\",\n              transform: \"translate(-50%, -50%)\",\n              textAlign: \"center\",\n              color: \"#666\",\n              fontSize: \"14px\"\n            },\n            children: \"⚠️ Failed to load image\"\n          }\n        ),\n        /* @__PURE__ */ jsx(\"style\", { children: `\n        @keyframes spin {\n          0% {\n            transform: translate(-50%, -50%) rotate(0deg);\n          }\n          100% {\n            transform: translate(-50%, -50%) rotate(360deg);\n          }\n        }\n      ` })\n      ]\n    }\n  );\n};\nexport default OptimizedImage;\n",
      "start": 1749089004962,
      "end": 1749089005178,
      "order": "normal",
      "sourcemaps": {
        "version": 3,
        "sources": [
          "C:/Users/.Freelancer/baotangnghethuat/src/components/OptimizedImage/OptimizedImage.jsx"
        ],
        "sourcesContent": [
          "import React, { useEffect, useRef, useState } from \"react\";\r\n\r\nconst OptimizedImage = ({\r\n  src,\r\n  alt,\r\n  className = \"\",\r\n  width,\r\n  height,\r\n  priority = false,\r\n  sizes = \"100vw\",\r\n  loading = \"lazy\",\r\n  onLoad,\r\n  onError,\r\n  style = {},\r\n  ...props\r\n}) => {\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n  const [isError, setIsError] = useState(false);\r\n  const [isInView, setIsInView] = useState(priority);\r\n  const imgRef = useRef(null);\r\n  const placeholderRef = useRef(null);\r\n\r\n  // Intersection Observer for lazy loading\r\n  useEffect(() => {\r\n    if (priority || isInView) return;\r\n\r\n    const observer = new IntersectionObserver(\r\n      (entries) => {\r\n        const [entry] = entries;\r\n        if (entry.isIntersecting) {\r\n          setIsInView(true);\r\n          observer.disconnect();\r\n        }\r\n      },\r\n      {\r\n        threshold: 0.1,\r\n        rootMargin: \"50px 0px\",\r\n      }\r\n    );\r\n\r\n    if (placeholderRef.current) {\r\n      observer.observe(placeholderRef.current);\r\n    }\r\n\r\n    return () => observer.disconnect();\r\n  }, [priority, isInView]);\r\n\r\n  const handleLoad = () => {\r\n    setIsLoaded(true);\r\n    onLoad?.();\r\n  };\r\n\r\n  const handleError = () => {\r\n    setIsError(true);\r\n    onError?.();\r\n  };\r\n\r\n  return (\r\n    <div\r\n      ref={placeholderRef}\r\n      className={`optimized-image-container ${className}`}\r\n      style={{\r\n        position: \"relative\",\r\n        overflow: \"hidden\",\r\n        backgroundColor: \"#f0f0f0\",\r\n        ...style,\r\n        ...(width && height && { aspectRatio: `${width} / ${height}` }),\r\n      }}\r\n      {...props}\r\n    >\r\n      {/* Main image */}\r\n      {(priority || isInView) && (\r\n        <picture>\r\n          {/* WebP source */}\r\n          <source srcSet={src} sizes={sizes} type=\"image/webp\" />\r\n\r\n          {/* Fallback source */}\r\n          <source srcSet={src} sizes={sizes} type=\"image/jpeg\" />\r\n\r\n          <img\r\n            ref={imgRef}\r\n            src={src}\r\n            alt={alt}\r\n            width={width}\r\n            height={height}\r\n            loading={priority ? \"eager\" : loading}\r\n            decoding=\"async\"\r\n            onLoad={handleLoad}\r\n            onError={handleError}\r\n            style={{\r\n              position: \"absolute\",\r\n              top: 0,\r\n              left: 0,\r\n              width: \"100%\",\r\n              height: \"100%\",\r\n              objectFit: \"cover\",\r\n              transition: \"opacity 0.3s ease\",\r\n              opacity: isLoaded ? 1 : 0,\r\n              transform: \"translateZ(0)\", // Force hardware acceleration\r\n            }}\r\n          />\r\n        </picture>\r\n      )}\r\n\r\n      {/* Loading indicator */}\r\n      {!isLoaded && !isError && (priority || isInView) && (\r\n        <div\r\n          className=\"image-loading\"\r\n          style={{\r\n            position: \"absolute\",\r\n            top: \"50%\",\r\n            left: \"50%\",\r\n            transform: \"translate(-50%, -50%)\",\r\n            width: \"40px\",\r\n            height: \"40px\",\r\n            border: \"3px solid #f3f3f3\",\r\n            borderTop: \"3px solid #b38741\",\r\n            borderRadius: \"50%\",\r\n            animation: \"spin 1s linear infinite\",\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {/* Error state */}\r\n      {isError && (\r\n        <div\r\n          className=\"image-error\"\r\n          style={{\r\n            position: \"absolute\",\r\n            top: \"50%\",\r\n            left: \"50%\",\r\n            transform: \"translate(-50%, -50%)\",\r\n            textAlign: \"center\",\r\n            color: \"#666\",\r\n            fontSize: \"14px\",\r\n          }}\r\n        >\r\n          ⚠️ Failed to load image\r\n        </div>\r\n      )}\r\n\r\n      <style>{`\r\n        @keyframes spin {\r\n          0% {\r\n            transform: translate(-50%, -50%) rotate(0deg);\r\n          }\r\n          100% {\r\n            transform: translate(-50%, -50%) rotate(360deg);\r\n          }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OptimizedImage;\r\n"
        ],
        "mappings": "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",
        "names": []
      }
    },
    {
      "name": "vite:worker",
      "start": 1749089005178,
      "end": 1749089005178,
      "order": "normal-normal"
    },
    {
      "name": "vite:define",
      "start": 1749089005178,
      "end": 1749089005178,
      "order": "normal-normal"
    },
    {
      "name": "vite:build-html",
      "start": 1749089005178,
      "end": 1749089005178,
      "order": "normal-normal"
    },
    {
      "name": "vite:worker-import-meta-url",
      "start": 1749089005178,
      "end": 1749089005178,
      "order": "normal-normal"
    },
    {
      "name": "vite:asset-import-meta-url",
      "start": 1749089005178,
      "end": 1749089005178,
      "order": "normal-normal"
    },
    {
      "name": "vite:dynamic-import-vars",
      "start": 1749089005178,
      "end": 1749089005178,
      "order": "normal-normal"
    },
    {
      "name": "vite:import-glob",
      "start": 1749089005178,
      "end": 1749089005178,
      "order": "normal-normal"
    },
    {
      "name": "vite:build-import-analysis",
      "start": 1749089005178,
      "end": 1749089005178,
      "order": "normal-normal"
    },
    {
      "name": "vite:reporter",
      "start": 1749089005178,
      "end": 1749089005178,
      "order": "normal"
    }
  ]
}
